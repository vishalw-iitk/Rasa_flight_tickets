version: '2.0'
session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
intents:
- greet
- begin_tickets_booking
- confirm_tickets_booking
- tell_name
- tell_contact
- tell_from_location
- tell_to_location
- tell_date
- tell_time
- affirm
- deny
- questions
entities:
- contact_number
- date
- from_location
- full_name
- time
- to_location
slots:
  full_name:
    type: text
    influence_conversation: true
  contact_number:
    type: text
    influence_conversation: true
  from_location:
    type: text
    influence_conversation: true
  to_location:
    type: text
    influence_conversation: true
  date:
    type: text
    influence_conversation: true
  time:
    type: text
    influence_conversation: true
  begin_status:
    type: bool
    influence_conversation: true
  confirm_status:
    type: bool
    influence_conversation: true
responses:
  utter_ask_begin_status:
  - text: |
      Great to have you with us
      Let me know if we can proceed to book the flight tickets
  utter_ask_full_name:
  - text: Please provide your full name
  utter_ask_contact_number:
  - text: Provide your contact number
  utter_ask_from_location:
  - text: From where do you want take the flight ?
  utter_ask_to_location:
  - text: Where do you want to land at ?
  utter_ask_date:
  - text: When do you want to travel ?
  utter_ask_time:
  - text: What is your flight timing ?
  utter_submit:
  - text: Thanks for providing the required info
  utter_showpreview:
  - text: |
      We have generated the ticket preview for you
      Service provider: Indigo
      Traveller name: {full_name}
      Contact number: {contact_number}
      From: {from_location}
      To: {to_location}
      Date of onboarding: {date}
      Price: $ 100
      Boarding time: {time}
      Gate number: 12
      Flight code: QA909
  utter_ask_confirm_status:
  - text: Do you want to confirm this booking ?
  utter_confirmation:
  - text: We have booked your tickets successfully
  utter_show_booked_ticket:
  - text: |
      Your flight is booked as follows:
      Service provider: Indigo
      Traveller name: {full_name}
      Contact number: {contact_number}
      From: {from_location}
      To: {to_location}
      Date of onboarding: {date}
      Price: $ 100
      Boarding time: {time}
      Gate number: 12
      Flight code: QA909
  utter_rejection:
  - text: |
      Thanks for your time Please visit us again for booking the flight tickets
actions:
- action_display
- action_sayname
- utter_confirmation
- utter_show_booked_ticket
- utter_showpreview
- utter_submit
forms:
  begin_form:
    required_slots:
      begin_status:
      - type: from_intent
        value: True
        intent:
        - affirm
        - begin_tickets_booking
        not_intent: deny
      - type: from_intent
        value: False
        intent: deny
        not_intent:
        - affirm
        - begin_tickets_booking
  flights_form:
    required_slots:
      full_name:
      - type: from_text
      contact_number:
      - type: from_text
      from_location:
      - type: from_text
      to_location:
      - type: from_text
      date:
      - type: from_text
      time:
      - type: from_text
  confirm_form:
    required_slots:
      confirm_status:
      - type: from_intent
        value: True
        intent:
        - affirm
        - confirm_tickets_booking
        not_intent: deny
      - type: from_intent
        value: False
        intent: deny
        not_intent:
        - affirm
        - confirm_tickets_booking


###### experiment : this form works
# forms:
#   begin_form:
#     required_slots:
#       begin_status:
#       - type: from_intent
#         value: True
#         intent: affirm
#         not_intent: deny
#       - type: from_intent
#         value: True
#         intent: begin_tickets_booking
#         not_intent: deny
#       - type: from_intent
#         value: False
#         intent: deny
#         not_intent: affirm
#       - type: from_intent
#         value: False
#         intent: deny
#         not_intent: begin_tickets_booking